(this.webpackJsonpfynapp_frontend=this.webpackJsonpfynapp_frontend||[]).push([[0],{253:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(38),s=n.n(a),o=n(5),l=n(6),c=n(10),u=n(11),d=n(141),h=n(17),m=n(264),p=n(261),b=n(266),f=n(262),j=n(7);function v(e){!0===function(){"undefined"===typeof window.fynapp_local_debug&&(Object({NODE_ENV:"production",PUBLIC_URL:"/fynapp_frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_URI_PREFIX:"fynapp_frontend",REACT_APP_DEBUG:"0",REACT_APP_API_URL:"https://fynapp-staging-tomkat-cr.vercel.app"}).hasOwnProperty("REACT_APP_DEBUG"),window.fynapp_local_debug=!1);return window.fynapp_local_debug}()&&console.log(e)}var y="token is invalid",A="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",O="Wait...",g="create",x="read",w="update",_="delete",k="list",C="Are you sure to delete this element? Please confirm with the [Delete] button or [Cancel] this operation.",E="Create",S="Update",D="Delete",N="Cancel",U="Select an option...",F=new(n(263).a)(JSON.parse(localStorage.getItem("currentUser"))),P={login:function(e,t){var n={method:"POST",headers:{Authorization:"Basic "+btoa(e+":"+t)}},r=new I({url:"users"});return fetch("".concat("https://fynapp-staging-tomkat-cr.vercel.app","/users/login"),n).then(T,R).then((function(e){if(e.error)return Promise.reject(e.message);var t={id:r.convertId(e.resultset._id),username:e.resultset.username,email:e.resultset.email,firstName:e.resultset.firstname,lastName:e.resultset.lastname,token:e.resultset.token};return localStorage.setItem("currentUser",JSON.stringify(t)),F.next(t),t}))},logout:function(){localStorage.removeItem("currentUser"),F.next(null)},currentUser:F.asObservable(),get currentUserValue(){return F.value}};function T(e){return e.text().then((function(t){if(!function(e){try{JSON.parse(e)}catch(t){return!1}return!0}(t))return Promise.reject(t);var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(P.logout(),window.location.reload(!0));var r=n&&n.message||e.statusText;return Promise.reject(r)}return"undefined"==typeof n.error&&(n.error=!1),"undefined"!=typeof n.error_message&&(n.message=n.error_message),"undefined"!=typeof n.resultset&&"object"!=typeof n.resultset&&(n.resultset=JSON.parse(n.resultset)),n}))}function R(e){return{error:!0,message:"Connection failure",reason:e}}var I=function(){function e(t){Object(o.a)(this,e),this.props=null,this.apiUrl="https://fynapp-staging-tomkat-cr.vercel.app",this.props=t,this.props.authHeader=function(){var e=P.currentUserValue;return e&&e.token?{"x-access-tokens":e.token}:{}}(),this.props.authAndJsonHeader=Object.assign({},{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},this.props.authHeader)}return Object(l.a)(e,[{key:"paramsToUrlQuery",value:function(e){var t="";return Object.entries(e).map((function(e){var n=Object(j.a)(e,2),r=n[0],i=n[1];return t+=(""===t?"?":"&")+r+"="+i})),t}},{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={method:"GET",headers:this.props.authHeader},n=this.paramsToUrlQuery(e),r=fetch("".concat(this.apiUrl,"/").concat(this.props.url).concat(n),t).then(T,R);return r}},{key:"getOne",value:function(e){var t={method:"GET",headers:this.props.authHeader},n=this.paramsToUrlQuery(e);return fetch("".concat(this.apiUrl,"/").concat(this.props.url).concat(n),t).then(T,R)}},{key:"createUpdateDelete",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];switch(e){case g:return this.createRow(n,r);case w:return this.updateRow(t,n,r);case _:return this.deleteRow(t,n,r);default:return R("Error CUD-1 - Invalid action: "+e)}}},{key:"createRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.paramsToUrlQuery(t),r={method:"POST",headers:this.props.authAndJsonHeader,body:JSON.stringify(e)},i=fetch("".concat(this.apiUrl,"/").concat(this.props.url).concat(n),r).then(T,R);return i}},{key:"updateRow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.paramsToUrlQuery(n);null!==e&&(t.id=e);var i={method:"PUT",headers:this.props.authAndJsonHeader,body:JSON.stringify(t)},a=fetch("".concat(this.apiUrl,"/").concat(this.props.url).concat(r),i).then(T,R);return a}},{key:"deleteRow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.paramsToUrlQuery(n);null!==e&&(r+=(""===r?"?":"&")+"id=".concat(e));var i={method:"DELETE",headers:this.props.authAndJsonHeader,body:JSON.stringify(t)};v("dbServices::deleteRow() - id: "+e),v("dbServices::deleteRow() - urlQuery: "+r),v("dbServices::deleteRow() - data:"),v(t),v("dbServices::deleteRow() - requestOptions:"),v(i);var a=fetch("".concat(this.apiUrl,"/").concat(this.props.url).concat(r),i).then(T,R);return a}},{key:"convertId",value:function(e){return null===e||""===e||"string"===typeof e?e:e.$oid}}]),e}();var M=n(16),Q=[{title:"Kg",value:"kg"},{title:"Pounds",value:"lb"}],H=[{title:"Meters",value:"m"},{title:"Inches",value:"i"}],K=n(265),q=n(24),B=n(50),J=n(260),G=n(74),W=n(139),L=n(51);function V(e){var t={};if(e.hasOwnProperty("location")){if(e.location.hasOwnProperty("search")&&""!==e.location.search){var n=e.location.search;"?"===n.substring(0,1)&&(n=e.location.search.slice(1));var r=n.split("&");Array.isArray(r)&&r.map((function(e){var n=e.split("=");return t[n[0]]="undefined"===typeof n[1]?"":n[1],null}))}}else e.hasOwnProperty("match")&&e.match.hasOwnProperty("params")&&(t=e.match.params);return t}var Y=n(23),z=Object(Y.a)();var Z=n(1),X=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).urlParams={},r.urlParams=V(e),"undefined"===typeof r.urlParams.redirect&&(r.urlParams.redirect="/"),P.currentUserValue&&z.push(r.urlParams.redirect),r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("div",{className:"alert alert-info",children:"FynApp"}),Object(Z.jsx)("h2",{children:"Login"}),Object(Z.jsx)(q.d,{initialValues:{username:"",password:""},validationSchema:B.a().shape({username:B.b().required("Username is required"),password:B.b().required("Password is required")}),onSubmit:function(t,n){var r=t.username,i=t.password,a=n.setStatus,s=n.setSubmitting;a(),P.login(r,i).then((function(t){var n;"undefined"!==typeof e.props.location&&"undefined"!==typeof e.props.location.state&&(n=e.props.location.state.from),n||(n={pathname:e.urlParams.redirect}),z.push(n)}),(function(e){s(!1),v(e),a(e)}))},children:function(e){var t=e.errors,n=e.status,r=e.touched,i=e.isSubmitting;return Object(Z.jsxs)(q.c,{children:[Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("label",{htmlFor:"username",children:"Username"}),Object(Z.jsx)(q.b,{name:"username",type:"text",className:"form-control"+(t.username&&r.username?" is-invalid":"")}),Object(Z.jsx)(q.a,{name:"username",component:"div",className:"invalid-feedback"})]}),Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Z.jsx)(q.b,{name:"password",type:"password",className:"form-control"+(t.password&&r.password?" is-invalid":"")}),Object(Z.jsx)(q.a,{name:"password",component:"div",className:"invalid-feedback"})]}),Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:"Login"}),i&&Object(Z.jsx)("img",{src:A,alt:"Wait..."})]}),n&&Object(Z.jsx)("div",{className:"alert alert-danger",children:n})]})}})]})}}]),n}(i.a.Component);W.a.library.add(L.e,L.c,L.b,L.f,L.a,L.d);var $=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).dbService=null,r.editor=null,r.componentSelectFieldsOptionsPromises=null,r.handleReadClick=function(e){var t=e.currentTarget.value;"undefined"===typeof t&&(t=e.target.value),"undefined"===typeof t?r.setNewError("ID not found..."):r.setNewAction(x,e.currentTarget.value)},r.handleNewClick=function(e){r.setNewAction(g,null)},r.handleEditClick=function(e){r.setNewAction(w,e.currentTarget.value)},r.handleDeleteClick=function(e){r.setNewAction(_,e.currentTarget.value)},r.handleSaveClick=function(e){r.setNewAction("save",e.currentTarget.value)},r.handleCancelClick=function(e){r.setNewAction(k,null)},r.editor=r.getEditorData(),r.editor.urlParams=V(r.props);var i="undefined"===typeof r.editor.urlParams.id?null:r.editor.urlParams.id,a="undefined"===typeof r.editor.urlParams.action?k:r.editor.urlParams.action,s="";"undefined"==typeof r.editor.childComponents&&(r.editor.childComponents=[]),"undefined"==typeof r.editor.primaryKeyName&&(r.editor.primaryKeyName="id"),"undefined"==typeof r.editor.parentKeyNames&&(r.editor.parentKeyNames=[]),"undefined"==typeof r.editor.type&&(r.editor.type="master_listing"),"undefined"==typeof r.editor.subType&&(r.editor.subType="table"),"undefined"==typeof r.editor.array_name&&"array"===r.editor.subType&&(s='Missing "array_name" parameter. It must be specified for subType "array".');var l={};return"undefined"!==typeof r.props.parentData&&(l=r.props.parentData),r.setParentData(l),r.getComponentSelectFieldsOptions(r.editor.fieldElements),r.state=r.initialState({id:i,action:a,editor:r.editor,error:s}),r.dbService=new I({url:r.editor.dbApiUrl}),v("Constructor | "+r.editor.name+" |"),v("this.props:"),v(r.props),v("this.editor:"),v(r.editor),r}return Object(l.a)(n,[{key:"getEditorData",value:function(){return{}}},{key:"initialState",value:function(e){var t={currentUser:P.currentUserValue,id:e.id,action:e.action,editor:e.editor,error:(e.error,e.error),showModalPopUp:!0,listingDataset:null,currentRowDataset:null};return t}},{key:"getEditorFlags",value:function(e){var t=e.toString().toLowerCase(),n={};return n.isEdit=t===w||t===g,n.isCreate=t===g,n.isRead=t===x,n.isUpdate=t===w,n.isDelete=t===_,n}},{key:"getErrorMessage",value:function(e,t){return e&&e.error?e.message:t||(e===y?e:null)}},{key:"setNewError",value:function(e){this.setState({error:e},(function(){}))}},{key:"setNewAction",value:function(e,t){var n=this;this.setState({action:e,id:t},(function(){n.state.action!==g&&n.dbRetrieve(n.state)}))}},{key:"componentDidMount",value:function(){this.dbRetrieve(this.state)}},{key:"componentDidCatch",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"shouldComponentUpdate",value:function(e,t){return!(t===this.state)||!!t.error}},{key:"dbRetrieve",value:function(e){var t=this,n=this.state.editor;switch(e.action){case x:case w:case _:var r={};r[n.primaryKeyName]=e.id,r=Object.assign({},r,n.parentFilter),this.dbService.getOne(r).then((function(e){return t.setState({currentRowDataset:e})}),(function(e){return t.setState({error:e})}));break;case k:var i={};i=Object.assign({},i,n.parentFilter),this.dbService.getAll(i).then((function(e){return t.setState({listingDataset:e})}),(function(e){return t.setState({error:e})})),this.setState({currentRowDataset:null})}}},{key:"showWaitAnimation",value:function(){return Object(Z.jsx)("div",{children:Object(Z.jsx)("center",{children:Object(Z.jsx)("img",{src:A,alt:O})})})}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.action,r=e.currentRowDataset,i=e.listingDataset,a=e.error;if(!t)return Object(Z.jsx)(X,{});var s=this.getErrorMessage(n===k?i:r,a);if(s)return le(s);if(n!==k&&n!==g&&null===r)return this.showWaitAnimation();if(n===k&&(null===i||"undefined"===typeof i.resultset||!Array.isArray(i.resultset)))return this.showWaitAnimation();switch(n){case x:return this.readAction();case g:return this.newAction();case w:return this.updateAction();case _:return this.deleteAction();case k:return this.listAction()}}},{key:"newAction",value:function(){return this.editAction("New",g)}},{key:"readAction",value:function(){return this.editAction("View",x)}},{key:"updateAction",value:function(){return this.editAction("Edit",w)}},{key:"deleteAction",value:function(){return this.editAction(D,_)}},{key:"listAction",value:function(){var e=this,t=this.state,n=t.listingDataset,r=t.error,i=t.editor,a=this.getErrorMessage(n,r),s=1,o=null;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h3",{children:i.title+" - Listing"}),a&&le(a),!a&&n&&Object(Z.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,children:[Object(Z.jsx)("thead",{children:Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:"#"},"#"),Object.entries(i.fieldElements).filter((function(e){var t=e[1];return"undefined"!==typeof t.listing&&!!t.listing})).map((function(e){var t=e[1];return Object(Z.jsx)("th",{children:t.label},t.name)})),Object(Z.jsx)("th",{colSpan:"2"}),Object(Z.jsx)("td",{children:Object(Z.jsx)("button",{className:"btn btn-primary",onClick:this.handleNewClick,children:Object(Z.jsx)(G.a,{icon:"plus"})})},"CreateButton")]})}),Object(Z.jsx)("tbody",{children:n.resultset.map((function(t){return(o="undefined"===typeof t._id?t[i.primaryKeyName]:e.dbService.convertId(t._id))&&Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("td",{children:s++},"#"),Object.entries(i.fieldElements).filter((function(e){var t=e[1];return"undefined"!==typeof t.listing&&!!t.listing})).map((function(e){var n=e[1];return Object(Z.jsx)("td",{children:re(n,t)},n.name)})),Object(Z.jsx)("td",{children:Object(Z.jsx)("button",{className:"btn btn-primary",onClick:e.handleReadClick,value:o,children:Object(Z.jsx)(G.a,{icon:"eye"})})},"ReadButton"),Object(Z.jsx)("td",{children:Object(Z.jsx)("button",{className:"btn btn-primary",onClick:e.handleEditClick,value:o,children:Object(Z.jsx)(G.a,{icon:"edit"})})},"EditButton"),Object(Z.jsx)("td",{children:Object(Z.jsx)("button",{className:"btn btn-primary",onClick:e.handleDeleteClick,value:o,children:Object(Z.jsx)(G.a,{icon:"trash"})})},"DeleteButton")]},o)}))})]})]})}},{key:"editAction",value:function(e,t){var n=this.state.editor,r=this.getEditorFlags(t),i={resultset:this.getFieldElementsDbValues({})},a=null,s=null;return r.isCreate||(i=this.state.currentRowDataset,a=this.state.error,s=this.getErrorMessage(i,a)),Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h3",{children:n.title+" - "+e}),s&&le(s),!s&&i&&this.editForm_Fornik_Final(t,i.resultset),!s&&i&&!r.isCreate&&this.iterateChildComponents(i.resultset)]})}},{key:"setShowModalWindow",value:function(e){this.setState({showModalPopUp:e})}},{key:"editForm_Fornik_Modal",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.state.editor;if("child_listing"!==i.type)return this.editForm_Fornik_Final(e,t,r);this.setShowModalWindow(!0);var a=function(){return n.setShowModalWindow(!1)},s=i.title+" Popup";return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(K.a,{show:this.state.showModalPopUp,onHide:a,children:[Object(Z.jsx)(K.a.Title,{children:s}),Object(Z.jsxs)(K.a.Body,{children:[Object(Z.jsx)("iframe",{style:{width:"100%",height:"400px"},title:s}),this.editForm_Fornik_Final(e,t,r="")]}),Object(Z.jsx)(K.a.Footer,{children:Object(Z.jsx)("button",{variant:"secondary",onClick:a,children:"Close"})})]})})}},{key:"editForm_Fornik_Final",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.state.editor,a=this.getEditorFlags(e),s=this.getFieldElementsDbValues(t),o=s[i.primaryKeyName];a.isDelete&&(r=(r?"<br/>":"")+C);var l={};return this.componentSelectFieldsOptionsPromises.map((function(e){return e.promiseResult.then((function(t){v(">> componentSelectFieldsOptions["+e.name+"] | options_array = "),v(t),l[e.name]=t})),null})),v(">> componentSelectFieldsOptions"),v(l),Object(Z.jsx)(q.d,{enableReinitialize:!0,initialValues:s,validationSchema:B.a().shape(this.getFieldElementsRequiredYupStype(a)),onSubmit:function(t,r){var i=r.setStatus,l=r.setSubmitting;i(),a.isCreate&&"undefined"!==typeof t.id&&delete t.id,n.saveRowToDatabase(e,o,t,s).then((function(e){e&&e.error?(l(!1),i(e)):n.setNewAction(k,null)}),(function(e){l(!1),i(e)}))},children:function(e){var t=e.errors,s=e.status,o=e.touched,c=e.isSubmitting;return Object(Z.jsxs)(q.c,{children:[r&&Object(Z.jsx)("div",{className:"alert alert-danger",children:r},"AlertMessageOnTop"),Object.entries(i.fieldElements).map((function(e){return ie(e,l,a,t,o)})),Object(Z.jsx)(J.a,{children:Object(Z.jsx)("tbody",{children:Object(Z.jsxs)("tr",{children:[!a.isRead&&Object(Z.jsxs)("td",{align:"left",children:[Object(Z.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:c,children:a.isCreate?E:a.isDelete?D:S},"SubmitButton"),c&&Object(Z.jsx)("img",{src:A,alt:O})]}),Object(Z.jsx)("td",{align:"left",children:Object(Z.jsx)("button",{type:"button",className:"btn btn-primary",disabled:c,onClick:n.handleCancelClick,children:N},"CancelButton")})]})})}),s&&Object(Z.jsx)("div",{className:"alert alert-danger",children:s}),Object(Z.jsx)("div",{})]})}})}},{key:"iterateChildComponents",value:function(e){var t=this.getFieldElementsDbValues(e),n=this.showChildComponents;return Object.entries(this.state.editor.childComponents).map((function(e){var r=e[1];return n(t,r)}))}},{key:"showChildComponents",value:function(e,t){return t.name,""}},{key:"saveRowToDatabase",value:function(e,t,n,r){var i=this.state.editor,a=n;return"child_listing"===i.type&&(t=null,a={},i.parentKeyNames.map((function(e){return a[e.parameterName]=i.parentData[e.parentElementName],null})),a[i.array_name]=n,a[i.array_name+"_old"]=r),this.dbService.createUpdateDelete(e,t,a)}},{key:"getFieldElementsListObj",value:function(){return Object.entries(this.state.editor.fieldElements).map((function(e){return e[1].name}))}},{key:"getComponentSelectFieldsOptions",value:function(e){this.componentSelectFieldsOptionsPromises=Object.entries(e).filter((function(e){var t=e[1];return"select_component"===t.type&&"undefined"!==typeof t.dataPopulator})).map((function(e){var t=e[1],n=new t.dataPopulator;return{name:t.name,promiseResult:n.getData().then((function(e){return e}))}}))}},{key:"getFieldElementsDbValues",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.state.editor,r={};"child_listing"!==n.type?r=Object.assign({},r,e):"array"===n.subType&&(r=Object.assign({},r,e[0]));var i=this.dbService,a=this.verifyElementExistence,s={};return Object.entries(n.fieldElements).map((function(e){var n=e[1];return"_id"===n.type?a(r,"_"+n.name)?s[n.name]=i.convertId(r["_"+n.name]):t&&(s[n.name]=0):a(r,n.name)?s[n.name]=r[n.name]:t&&(s[n.name]="number"===n.type?0:""),null})),s}},{key:"verifyElementExistence",value:function(e,t){return"undefined"!==typeof e[t]}},{key:"getFieldElementsRequiredYupStype",value:function(e){if(e.isDelete)return{};var t={};return Object.entries(this.state.editor.fieldElements).map((function(e){var n=e[1];return n.required&&(t[n.name]=B.b().required(n.label+" is required")),null})),t}},{key:"setParentData",value:function(e){var t={};this.editor.parentKeyNames.map((function(n){return t[n.parameterName]=e[n.parentElementName]})),this.editor.parentFilter=t,this.editor.parentData=e}}]),n}(i.a.Component),ee=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).editor=null,r.dbService=null,r.editor=r.getEditorData(),r.state=r.initialState(),r.dbService=new I({url:r.editor.dbApiUrl}),r}return Object(l.a)(n,[{key:"getEditorData",value:function(){return{}}},{key:"initialState",value:function(){return{db_rows:null,filter:"undefined"!==typeof this.props.filter?this.props.filter:null,show_description:"undefined"!==typeof this.props.show_description&&this.props.show_description,editor:this.editor}}},{key:"componentDidMount",value:function(){var e=this;this.dbService.getAll().then((function(t){e.setState({db_rows:t})})).catch((function(t){v(e.state.editor.title+"-Select | error object:"),v(t)}))}},{key:"render",value:function(){if(null===this.state.db_rows)return"";var e=[{_id:null,name:U}].concat(Object(M.a)(this.state.db_rows.resultset)),t=this.dbService,n=this.state,r=n.filter,i=n.show_description;return e.filter((function(e){return null===r||t.convertId(e._id)===r})).map((function(e){return i?e.name:Object(Z.jsx)("option",{value:t.convertId(e._id),children:e.name},t.convertId(e._id))}))}}]),n}(i.a.Component),te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.editor=null,this.dbService=null,this.props=null,this.props=t,this.editor=this.getEditorData(),this.state=this.initialState(),this.dbService=new I({url:this.editor.dbApiUrl})}return Object(l.a)(e,[{key:"getEditorData",value:function(){return{}}},{key:"initialState",value:function(){return{db_rows:null,filter:"undefined"!==typeof this.props.filter?this.props.filter:null,editor:this.editor,title_field_name:"undefined"!==typeof this.props.title_field_name?this.props.show_description:"title",value_field_name:"undefined"!==typeof this.props.value_field_name?this.props.value_field_name:"value"}}},{key:"getData",value:function(){var e=this;return this.dbService.getAll().then((function(t){return e.state.db_rows=t,e.returnData()})).catch((function(t){return v(e.state.editor.title+"-Select | error object:"),v(t),!1}))}},{key:"returnData",value:function(){var e=this.dbService,t=this.state,n=t.filter,r=t.title_field_name,i=t.value_field_name,a=t.db_rows,s=[],o=0;return a.resultset.filter((function(t){return null===n||e.convertId(t._id)===n})).map((function(t){var n={};return n[r]=t.name,n[i]=e.convertId(t._id),s[o++]=n,null})),s}}]),e}();function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r={};r[t]=U,r[n]=null;var i=[r].concat(Object(M.a)(e));return i.map((function(e){return Object(Z.jsx)("option",{value:e[n],children:e[t]},e[n])}))}function re(e,t){return"select_component"===e.type?Object(Z.jsx)(e.component,{filter:t[e.name].toString(),show_description:!0}):"select"===e.type?e.select_elements.filter((function(n){return n.value===t[e.name].toString()})).map((function(e){return e.title})):t[e.name].toString()}function ie(e,t,n,r,i){var a=e[1],s=!n.isEdit||"undefined"!==typeof a.readonly&&a.readonly;switch(a.type){case"select_component":var o=[];return"undefined"!==typeof a.dataPopulator&&"undefined"!==typeof t[a.name]&&(o=t[a.name]),Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("label",{htmlFor:a.name,children:a.label}),Object(Z.jsx)(q.b,{name:a.name,as:"select",disabled:s,className:"form-control"+(r[a.name]&&i[a.name]?" is-invalid":""),children:"undefined"!==typeof a.dataPopulator?ne(o):Object(Z.jsx)(a.component,{})}),Object(Z.jsx)(q.a,{name:a.name,component:"div",className:"invalid-feedback"})]},a.name);case"select":return Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("label",{htmlFor:a.name,children:a.label}),Object(Z.jsx)(q.b,{name:a.name,as:"select",disabled:s,className:"form-control"+(r[a.name]&&i[a.name]?" is-invalid":""),children:ne(a.select_elements)}),Object(Z.jsx)(q.a,{name:a.name,component:"div",className:"invalid-feedback"})]},a.name);default:return Object(Z.jsxs)("div",{className:"form-group",children:[Object(Z.jsx)("label",{htmlFor:a.name,children:a.label}),Object(Z.jsx)(q.b,{name:a.name,type:a.type,disabled:s,className:"form-control"+(r[a.name]&&i[a.name]?" is-invalid":"")},a.name),Object(Z.jsx)(q.a,{name:a.name,component:"div",className:"invalid-feedback"})]},a.name)}}var ae=n(140);function se(){P.logout(),z.push("/login?redirect="+window.location.pathname)}function oe(){window.location.reload()}function le(e){return Object(Z.jsxs)("div",{children:[ue(e),ce(e)]})}function ce(e){return e!==y?Object(Z.jsx)("div",{}):Object(Z.jsxs)("div",{children:[Object(Z.jsx)("br",{}),Object(Z.jsx)(ae.a,{onClick:se,children:"Click here to login again."})]})}function ue(e){return Object(Z.jsxs)("div",{children:[de(e===y?"Session expired.":e),Object(Z.jsx)("br",{}),Object(Z.jsx)(ae.a,{onClick:oe,children:"Click here to retry"})]})}function de(e){return Object(Z.jsx)("div",{className:"alert alert-danger",children:e})}var he=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={currentUser:P.currentUserValue,error:null},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.error;return Object(Z.jsxs)("div",{children:[!t&&Object(Z.jsx)(X,{}),t&&Object(Z.jsxs)("h1",{children:["Hi ",t.firstName,"!"]}),n&&le(n)]})}}]),n}(i.a.Component);function me(){return{baseUrl:"food_moments",title:"Food Moments",name:"Food Moment",component:pe,dbApiUrl:"food_moments",fieldElements:[{name:"id",required:!0,label:"ID",type:"_id",readonly:!0},{name:"name",required:!0,label:"Name",type:"text",readonly:!1,listing:!0}]}}var pe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return me()}}]),n}($),be=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return me()}}]),n}(ee),fe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return me()}}]),n}(te);var je=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return{baseUrl:"food_times",title:"Food Times",name:"Food Time",component:je,dbApiUrl:"users/user-food-times",type:"child_listing",subType:"array",array_name:"food_times",parentKeyNames:[{parameterName:"user_id",parentElementName:"id"}],primaryKeyName:"food_moment_id",fieldElements:[{name:"food_moment_id",label:"Type",required:!0,type:"select_component",dataPopulator:fe,component:be,listing:!0},{name:"food_time",required:!0,label:"Time",type:"text",readonly:!1,listing:!0}]}}}]),n}($);var ve=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return{baseUrl:"user_history",title:"User History",name:"User History",component:ve,dbApiUrl:"users/user-user-history",type:"child_listing",subType:"array",array_name:"user_history",parentKeyNames:[{parameterName:"user_id",parentElementName:"id"}],primaryKeyName:"date",fieldElements:[{name:"date",label:"Date",required:!0,type:"date",listing:!0},{name:"goals",required:!0,label:"Goals",type:"text",readonly:!1,listing:!0},{name:"weight",required:!0,label:"Weight",type:"number",readonly:!1,listing:!0},{name:"weight_unit",required:!0,label:"Weight Unit",type:"select",select_elements:Q,readonly:!1,listing:!0}]}}}]),n}($);function ye(){return{baseUrl:"users",title:"Users",name:"User",component:Ae,dbApiUrl:"users",fieldElements:[{name:"id",required:!0,label:"ID",type:"_id",readonly:!0},{name:"firstname",required:!0,label:"First Name",type:"text",readonly:!1,listing:!0},{name:"lastname",required:!0,label:"Last Name",type:"text",readonly:!1,listing:!0},{name:"email",required:!0,label:"Email",type:"email",readonly:!1,listing:!0},{name:"training_days",required:!0,label:"Training Days",type:"text",readonly:!1},{name:"training_hour",required:!0,label:"Training Hour",type:"text",readonly:!1},{name:"birthday",required:!0,label:"Birthday",type:"date",readonly:!1},{name:"height",required:!0,label:"Height",type:"number",readonly:!1,listing:!0},{name:"height_unit",required:!0,label:"Height Unit",type:"select",select_elements:H,readonly:!1,listing:!0},{name:"weight",required:!0,label:"Weight",type:"number",readonly:!1},{name:"weight_unit",required:!0,label:"Weight Unit",type:"select",select_elements:Q,readonly:!1},{name:"creation_date",required:!0,label:"Creation Date",type:"date",readonly:!1,hidden:!0,default_value:"current_timestamp",listing:!0}],childComponents:[{name:"UsersFoodTimes"},{name:"UsersUserHistory"}]}}var Ae=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEditorData",value:function(){return ye()}},{key:"showChildComponents",value:function(e,t){switch(v("USERS showChildComponents | childElement.name: "+t.name),t.name){case"UsersFoodTimes":return Object(Z.jsx)(je,{parentData:e,childElementData:t},"UsersFoodTimes");case"UsersUserHistory":return Object(Z.jsx)(ve,{parentData:e,childElementData:t},"UsersUserHistory");default:return""}}}]),n}($),Oe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={currentUser:null},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;P.currentUser.subscribe((function(t){return e.setState({currentUser:t})}))}},{key:"logout",value:function(){P.logout(),z.push("/login")}},{key:"render",value:function(){var e=this.state.currentUser;return Object(Z.jsxs)(d.a,{history:z,basename:"fynapp_frontend",children:[Object(Z.jsx)("div",{children:e&&Object(Z.jsx)(m.a,{className:"navbar-dark bg-dark",expand:"lg",children:Object(Z.jsxs)(p.a,{children:[Object(Z.jsx)(m.a.Brand,{href:"/",children:"FynApp"}),Object(Z.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(Z.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(Z.jsxs)(b.a,{className:"me-auto",children:[Object(Z.jsx)(b.a.Link,{href:"/",children:"Home"}),Object(Z.jsxs)(f.a,{title:"Admin",id:"basic-nav-dropdown",children:[xe(ye()),xe(me())]})]})}),Object(Z.jsxs)(m.a.Collapse,{id:"current-user-navbar-nav",className:"justify-content-end",children:[Object(Z.jsx)(m.a.Text,{children:"Signed in as:"}),Object(Z.jsxs)(f.a,{title:e.firstName,id:"basic-nav-dropdown",children:[Object(Z.jsx)(f.a.Item,{href:"#profile",children:"Profile"}),Object(Z.jsx)(f.a.Item,{href:"#preferences",children:"Preferences"}),Object(Z.jsx)(f.a.Divider,{}),Object(Z.jsx)(f.a.Item,{onClick:this.logout,children:"Logout"})]})]})]})})}),Object(Z.jsx)("div",{children:Object(Z.jsx)("div",{className:"jumbotron",children:Object(Z.jsx)("div",{className:"container",children:Object(Z.jsx)("div",{className:"row",children:Object(Z.jsxs)("div",{className:"col-md-6",children:[Object(Z.jsx)(h.a,{exact:!0,path:"/",component:he}),Object(Z.jsx)(h.a,{path:"/login",component:X}),ge(ye()),ge(me())]})})})})})]})}}]),n}(i.a.Component);function ge(e){return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(h.a,{path:"/"+e.baseUrl,component:e.component})})}function xe(e){return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(f.a.Item,{href:"/"+e.baseUrl,children:e.title})})}var we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,267)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};s.a.render(Object(Z.jsx)(i.a.StrictMode,{children:Object(Z.jsx)(Oe,{})}),document.getElementById("root")),we()}},[[253,1,2]]]);
//# sourceMappingURL=main.6e2bd426.chunk.js.map